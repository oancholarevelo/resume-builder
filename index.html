<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Builder | Build That Thing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            background-image: radial-gradient(circle at top left, #e0e7ff, transparent 40%), radial-gradient(circle at bottom right, #e0f2fe, transparent 50%);
        }

        .form-section-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e293b;
            padding-bottom: 8px;
            margin-bottom: 16px;
            border-bottom: 1px solid #cbd5e1;
        }

        #resume-preview {
            background: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }

        .preview-section-title {
            font-weight: 700;
            font-size: 1.125rem;
            color: #111827;
            border-bottom: 2px solid #d1d5db;
            padding-bottom: 4px;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        
        /* Mobile Menu transition */
        #mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
    </style>
</head>

<body class="text-slate-800">
    <header class="w-full bg-white/50 backdrop-blur-lg border-b border-slate-200/80 sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 py-4 flex justify-between items-center">
            <a href="https://buildthatthing.vercel.app/" class="text-xl font-bold text-slate-800">
                Build That Thing
            </a>
            <nav class="hidden md:flex items-center gap-4 sm:gap-6 text-sm font-medium text-slate-600">
                <a href="https://buildthatinvoice.vercel.app/"
                    class="flex items-center gap-2 hover:text-indigo-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <line x1="10" y1="9" x2="8" y2="9"></line>
                    </svg>
                    <span class="hidden sm:inline">Invoice</span>
                </a>
                <a href="https://buildthatresume.vercel.app/"
                    class="flex items-center gap-2 text-indigo-600 font-semibold">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="20" height="14" x="2" y="7" rx="2" ry="2" />
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
                    </svg>
                    <span class="hidden sm:inline">Resume</span>
                </a>
                <a href="https://convertthatimage.vercel.app/"
                    class="flex items-center gap-2 hover:text-indigo-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
                        <circle cx="9" cy="9" r="2"></circle>
                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
                    </svg>
                    <span class="hidden sm:inline">Image</span>
                </a>
            </nav>
            <div class="md:hidden">
                <button id="menu-btn" class="p-2 rounded-md hover:bg-slate-200/60 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <svg id="menu-open-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    <svg id="menu-close-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
        </div>
         <div id="mobile-menu" class="md:hidden bg-white/80 backdrop-blur-lg">
            <a href="https://buildthatinvoice.vercel.app/" class="block py-3 px-4 text-sm font-medium text-slate-600 hover:bg-slate-100 border-t border-slate-200/80">Invoice</a>
            <a href="https://buildthatresume.vercel.app/" class="block py-3 px-4 text-sm font-medium text-slate-600 hover:bg-slate-100 border-t border-slate-200/80">Resume</a>
            <a href="https://convertthatimage.vercel.app/" class="block py-3 px-4 text-sm font-medium text-slate-600 hover:bg-slate-100 border-t border-slate-200/80">Image</a>
        </div>
    </header>


    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-12">
             <div class="flex justify-center mb-6">
                <div class="p-4 bg-indigo-100 rounded-full">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
                </div>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-slate-900">
                Build Your Resume
            </h1>
            <p class="text-slate-600 mt-4 max-w-2xl mx-auto text-lg">
                Create a professional resume in minutes with our easy-to-use builder.
            </p>
        </header>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-white/50 p-6 rounded-2xl shadow-lg border border-slate-200/80 backdrop-blur-lg">
                <div class="mb-6">
                    <h2 class="form-section-title">Personal Information</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="name" placeholder="Full Name"
                            class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                            value="Oliver Revelo">
                        <input type="email" id="email" placeholder="Email Address"
                            class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                            value="oancholarevelo@gmail.com">
                        <input type="text" id="address" placeholder="City, Country"
                            class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                            value="Rizal, Philippines">
                        <input type="text" id="phone" placeholder="Phone Number"
                            class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                            value="(63) 947 533 7630">
                    </div>
                </div>

                <div class="mb-6">
                    <h2 class="form-section-title">Styling</h2>
                    <label for="font-select" class="block mb-2 font-medium text-slate-700">Font Family</label>
                    <select id="font-select"
                        class="w-full p-3 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                        <option value="helvetica">Modern (Sans-Serif)</option>
                        <option value="times">Classic (Serif)</option>
                        <option value="courier">Typewriter (Monospace)</option>
                    </select>
                </div>

                <div class="mb-6">
                    <h2 class="form-section-title">Objective</h2>
                    <textarea id="objective" placeholder="Your career objective..."
                        class="w-full p-3 border border-slate-300 rounded-lg h-24 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">A highly versatile Computer Engineer and Graphic/UI/UX Designer with a passion for integrating functional engineering with intuitive design. I aim to leverage my technical expertise in software development, cybersecurity, and creative design to build innovative, user-centric digital solutions that enhance user experience and drive product success.</textarea>
                </div>

                <div class="space-y-6">
                    <div>
                        <h2 class="form-section-title">Education</h2>
                        <div id="education-fields" class="space-y-4"></div>
                        <button
                            onclick="addField('education-fields', ['School Name', 'Degree/Course', 'Year (e.g., 2022-2025)'])"
                            class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-2 px-4 rounded-lg mt-2 transition-colors text-sm">Add
                            Education</button>
                    </div>
                    <div>
                        <h2 class="form-section-title">Experience</h2>
                        <div id="experience-fields" class="space-y-4"></div>
                        <button
                            onclick="addField('experience-fields', ['Job Title', 'Company', 'Duration (e.g., Jan 2024 - Present)', {placeholder: 'Description...', type: 'textarea'}])"
                            class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-2 px-4 rounded-lg mt-2 transition-colors text-sm">Add
                            Experience</button>
                    </div>
                    <div>
                        <h2 class="form-section-title">Skills</h2>
                        <div id="skills-fields" class="space-y-4"></div>
                        <button
                            onclick="addField('skills-fields', ['Skill Category (e.g., Programming)', 'List of skills'], false)"
                            class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-2 px-4 rounded-lg mt-2 transition-colors text-sm">Add
                            Skill</button>
                    </div>
                    <div>
                        <h2 class="form-section-title">Honors and Awards</h2>
                        <div id="honors-fields" class="space-y-4"></div>
                        <button onclick="addField('honors-fields', ['Honor or Award'], false)"
                            class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-2 px-4 rounded-lg mt-2 transition-colors text-sm">Add
                            Honor/Award</button>
                    </div>
                    <div>
                        <h2 class="form-section-title">Languages</h2>
                        <div id="languages-fields" class="space-y-4"></div>
                        <button onclick="addField('languages-fields', ['Language', 'Proficiency'], false)"
                            class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-2 px-4 rounded-lg mt-2 transition-colors text-sm">Add
                            Language</button>
                    </div>
                    <div>
                        <h2 class="form-section-title">References</h2>
                        <div id="references-fields" class="space-y-4"></div>
                        <button
                            onclick="addField('references-fields', ['Reference Name', 'Title & Company', 'Contact Info'])"
                            class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-2 px-4 rounded-lg mt-2 transition-colors text-sm">Add
                            Reference</button>
                    </div>
                </div>
            </div>

            <div class="sticky top-24 h-full">
                <div class="bg-white/50 p-4 sm:p-6 rounded-2xl shadow-lg border border-slate-200/80 backdrop-blur-lg">
                    <h2 class="text-2xl font-bold mb-4 text-center text-slate-700">Live Preview</h2>
                    <div class="overflow-auto max-h-[80vh] p-2">
                        <div id="resume-preview"
                            class="w-full max-w-4xl mx-auto p-8 border border-gray-300 rounded-lg min-h-[792px]">
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row justify-center mt-6 gap-4">
                        <button id="preview-btn"
                            class="w-full sm:w-auto bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-all duration-300">Update
                            Preview</button>
                        <button id="download-pdf"
                            class="w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg shadow-indigo-500/20 hover:shadow-xl hover:shadow-indigo-500/30 transition-all duration-300">Download
                            as PDF</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-white/50 border-t border-slate-200/80 mt-12 py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-8 lg:px-12">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm">
                <div class="text-center md:text-left">
                    <p class="text-base font-bold text-slate-800">Build That Thing</p>
                    <p class="mt-2 text-slate-500">
                        A suite of powerful, client-side tools to help you build and create.
                    </p>
                    <div class="flex justify-center md:justify-start gap-6 mt-4">
                        <a href="https://oliverrevelo.vercel.app" target="_blank" rel="noopener noreferrer"
                            class="font-medium text-slate-600 hover:text-indigo-600 transition-colors">Portfolio</a>
                        <a href="https://github.com/oancholarevelo" target="_blank" rel="noopener noreferrer"
                            class="font-medium text-slate-600 hover:text-indigo-600 transition-colors">GitHub</a>
                    </div>
                    <p class="mt-4 text-xs text-slate-400" id="copyright-year">
                        &copy; 2025 Oliver Revelo. All Rights Reserved.
                    </p>
                </div>

                <div class="flex flex-col items-center md:items-end">
                    <h3 class="font-semibold text-slate-800">Navigate</h3>
                    <ul class="mt-2 space-y-1 text-center md:text-right">
                        <li><a href="https://buildthatthing.vercel.app/"
                                class="text-slate-500 hover:text-indigo-600 transition-colors">Build That Thing Home</a>
                        </li>
                        <li><a href="https://buildthatinvoice.vercel.app/"
                                class="text-slate-500 hover:text-indigo-600 transition-colors">Invoice Builder</a></li>
                        <li><a href="https://buildthatresume.vercel.app/"
                                class="text-slate-500 hover:text-indigo-600 transition-colors">Resume Builder</a></li>
                        <li><a href="https://convertthatimage.vercel.app/"
                                class="text-slate-500 hover:text-indigo-600 transition-colors">Image Converter</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('copyright-year').innerHTML = `&copy; ${new Date().getFullYear()} Oliver Revelo. All Rights Reserved.`;
        
        // Hamburger Menu Logic
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const openIcon = document.getElementById('menu-open-icon');
        const closeIcon = document.getElementById('menu-close-icon');

        menuBtn.addEventListener('click', () => {
            const isOpen = mobileMenu.style.maxHeight;
            if (isOpen && isOpen !== '0px') {
                mobileMenu.style.maxHeight = null;
            } else {
                mobileMenu.style.maxHeight = mobileMenu.scrollHeight + 'px';
            }
            openIcon.classList.toggle('hidden');
            closeIcon.classList.toggle('hidden');
        });
    </script>


    <script>
        const { jsPDF } = window.jspdf;

        // --- DYNAMIC FORM FIELD FUNCTIONS ---
        function addField(containerId, fields, isGrouped = true) {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = isGrouped ? 'relative p-4 border border-slate-200 rounded-lg bg-slate-50/50' : 'relative';

            const fieldContainer = document.createElement('div');
            fieldContainer.className = 'grid grid-cols-1 gap-2';

            fields.forEach(f => {
                const fieldConfig = typeof f === 'string' ? { placeholder: f, type: 'input' } : f;
                const el = fieldConfig.type === 'textarea' ? document.createElement('textarea') : document.createElement('input');
                el.type = fieldConfig.type === 'textarea' ? '' : 'text';
                el.placeholder = fieldConfig.placeholder;
                el.className = 'w-full p-2 border border-slate-300 rounded-md focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition text-sm';
                if (fieldConfig.type === 'textarea') el.rows = 3;
                fieldContainer.appendChild(el);
            });
            div.appendChild(fieldContainer);

            const removeBtn = document.createElement('button');
            removeBtn.innerHTML = '&times;';
            removeBtn.className = 'absolute top-1 right-2 text-slate-400 hover:text-red-500 font-bold text-xl';
            removeBtn.onclick = () => div.remove();
            div.appendChild(removeBtn);

            container.appendChild(div);
            return div;
        }

        function setFieldValues(fieldDiv, values) {
            const inputs = fieldDiv.querySelectorAll('input, textarea');
            inputs.forEach((input, index) => {
                if (values[index]) {
                    input.value = values[index];
                }
            });
        }

        // --- PREVIEW GENERATION ---
        function generatePreview() {
            const preview = document.getElementById('resume-preview');
            preview.innerHTML = ''; // Clear previous content

            const name = document.getElementById('name').value || "Your Name";
            const contactInfo = [
                document.getElementById('address').value,
                document.getElementById('phone').value,
                document.getElementById('email').value
            ].filter(Boolean).join(' | ');

            preview.innerHTML += `<div class="text-center mb-8"><h1 class="text-4xl font-bold">${name}</h1><p class="text-md text-gray-600 mt-2">${contactInfo}</p></div>`;
            const objective = document.getElementById('objective').value;
            if (objective) {
                preview.innerHTML += `<div><h2 class="preview-section-title">Objective</h2><p class="text-gray-700 text-justify">${objective}</p></div>`;
            }

            const generateSectionHTML = (containerId, title) => {
                const items = document.querySelectorAll(`#${containerId} > div`);
                if (items.length === 0) return '';
                let hasContent = Array.from(items).some(item => Array.from(item.querySelectorAll('input, textarea')).some(i => i.value));
                if (!hasContent) return '';

                let html = `<h2 class="preview-section-title">${title}</h2>`;
                items.forEach(item => {
                    const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                    if (inputs.every(val => !val)) return;

                    if (containerId === 'education-fields') html += `<div class="mb-3"><div class="flex justify-between items-baseline"><p class="font-semibold text-lg">${inputs[0] || ''}</p><p class="text-gray-500 text-sm">${inputs[2] || ''}</p></div><p class="text-gray-700">${inputs[1] || ''}</p></div>`;
                    if (containerId === 'experience-fields') html += `<div class="mb-4"><div class="flex justify-between items-baseline"><h3 class="font-bold text-xl">${inputs[0] || ''}</h3><p class="text-sm text-gray-500">${inputs[2] || ''}</p></div><p class="font-semibold text-md text-gray-800">${inputs[1] || ''}</p><p class="text-gray-700 whitespace-pre-line mt-1">${inputs[3] || ''}</p></div>`;
                    if (containerId === 'skills-fields') html += `<div class="mb-2"><span class="font-semibold">${inputs[0] || ''}:</span> <span class="text-gray-700">${inputs[1] || ''}</span></div>`;
                    if (containerId === 'honors-fields') html += `<li class="text-gray-700 ml-4">${inputs[0] || ''}</li>`;
                    if (containerId === 'languages-fields') html += `<div class="mb-2"><span class="font-semibold">${inputs[0] || ''}: </span> <span class="text-gray-700">${inputs[1] || ''}</span></div>`;
                    if (containerId === 'references-fields') html += `<div class="mb-3"><p class="font-semibold text-lg">${inputs[0] || ''}</p><p class="text-gray-700">${inputs[1] || ''}</p><p class="text-gray-500 text-sm">${inputs[2] || ''}</p></div>`;
                });
                return html;
            }

            preview.innerHTML += generateSectionHTML('education-fields', 'Education');
            preview.innerHTML += generateSectionHTML('experience-fields', 'Experience');
            preview.innerHTML += generateSectionHTML('skills-fields', 'Skills');
            preview.innerHTML += `<ul>${generateSectionHTML('honors-fields', 'Honors and Awards')}</ul>`;
            preview.innerHTML += generateSectionHTML('languages-fields', 'Languages');
            preview.innerHTML += generateSectionHTML('references-fields', 'References');
        }
        document.getElementById('preview-btn').addEventListener('click', generatePreview);

        // --- PDF GENERATION (FULLY CORRECTED) ---
        document.getElementById('download-pdf').addEventListener('click', () => {
            try {
                const doc = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });

                const selectedFont = document.getElementById('font-select').value;

                let y = 15;
                const margin = 15;
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const usableWidth = pageWidth - (margin * 2);
                const FONT_SCALE = doc.internal.scaleFactor;
                const LINE_HEIGHT_RATIO = 1.25;
                const COLORS = { title: '#1F2937', subtitle: '#4B5563', text: '#374151' };
                const SIZES = { h1: 26, h2: 14, h3: 12, h4: 11, body: 10.5, small: 10 };

                function checkPageBreak(requiredHeight) {
                    if (y + requiredHeight > pageHeight - margin) {
                        doc.addPage();
                        y = margin;
                    }
                }

                function getLinesHeight(lines, size) {
                    return lines.length * size * LINE_HEIGHT_RATIO / FONT_SCALE;
                }

                function addParagraph(text, { size, style = 'normal', color = COLORS.text, align = 'left', spacing = 0, x = margin, width = usableWidth, charSpacing = 0 }) {
                    doc.setFont(selectedFont, style).setFontSize(size).setTextColor(color);
                    const splitWidth = align === 'justify' ? (width * 0.98) : width;
                    const lines = doc.splitTextToSize(text, splitWidth);
                    const height = getLinesHeight(lines, size);
                    checkPageBreak(height);
                    doc.text(lines, x, y, { align: align, charSpace: charSpacing, maxWidth: width });
                    y += height + spacing;
                }

                function addSectionTitle(title) {
                    y += 6;
                    checkPageBreak(15);
                    addParagraph(title, { size: SIZES.h2, style: 'bold', color: COLORS.title });
                    y += 1;
                    doc.setDrawColor(220, 220, 220);
                    doc.setLineWidth(0.2);
                    doc.line(margin, y, pageWidth - margin, y);
                    y += 5;
                }

                function addTwoColumnLine(left, right, leftOptions, rightOptions) {
                    doc.setFont(selectedFont, leftOptions.style).setFontSize(leftOptions.size);
                    const leftLines = doc.splitTextToSize(left, usableWidth * 0.7);
                    const leftHeight = getLinesHeight(leftLines, leftOptions.size);
                    doc.setFont(selectedFont, rightOptions.style).setFontSize(rightOptions.size);
                    const rightLines = doc.splitTextToSize(right, usableWidth * 0.3);
                    const rightHeight = getLinesHeight(rightLines, rightOptions.size);
                    const maxHeight = Math.max(leftHeight, rightHeight);
                    checkPageBreak(maxHeight);
                    doc.setFont(selectedFont, leftOptions.style).setFontSize(leftOptions.size).setTextColor(leftOptions.color);
                    doc.text(leftLines, margin, y);
                    doc.setFont(selectedFont, rightOptions.style).setFontSize(rightOptions.size).setTextColor(rightOptions.color);
                    doc.text(rightLines, pageWidth - margin, y, { align: 'right' });
                    y += maxHeight;
                }

                // 1. HEADER
                const name = document.getElementById('name').value || "Your Name";
                doc.setFont(selectedFont, 'bold').setFontSize(SIZES.h1).setTextColor(COLORS.title);
                doc.text(name, pageWidth / 2, y, { align: 'center' });
                y += 9;
                const contactInfo = [document.getElementById('address').value, document.getElementById('phone').value, document.getElementById('email').value].filter(Boolean).join(' | ');
                doc.setFont(selectedFont, 'normal').setFontSize(SIZES.small).setTextColor(COLORS.subtitle);
                doc.text(contactInfo, pageWidth / 2, y, { align: 'center' });
                y += 8;

                // 2. OBJECTIVE
                const objective = document.getElementById('objective').value;
                if (objective) {
                    addSectionTitle('Objective');
                    addParagraph(objective, { size: SIZES.body, spacing: 3, align: 'justify' });
                }

                // 3. SECTIONS PROCESSOR
                function processSection(containerId, title, processorFn) {
                    const items = Array.from(document.querySelectorAll(`#${containerId} > div`)).filter(item => Array.from(item.querySelectorAll('input, textarea')).some(i => i.value));
                    if (items.length > 0) {
                        addSectionTitle(title);
                        processorFn(items);
                    }
                }

                // 4. SECTION-SPECIFIC RENDERERS
                processSection('education-fields', 'Education', (items) => {
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        addTwoColumnLine(inputs[0], inputs[2], { size: SIZES.h4, style: 'bold', color: COLORS.title }, { size: SIZES.small, style: 'normal', color: COLORS.subtitle });
                        addParagraph(inputs[1], { size: SIZES.body, style: 'italic', spacing: 4, color: COLORS.subtitle });
                    });
                });

                processSection('experience-fields', 'Experience', (items) => {
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        addTwoColumnLine(inputs[0], inputs[2], { size: SIZES.h3, style: 'bold', color: COLORS.title }, { size: SIZES.small, style: 'normal', color: COLORS.subtitle });
                        addParagraph(inputs[1], { size: SIZES.h4, style: 'italic', color: COLORS.subtitle, spacing: 2 });
                        addParagraph(inputs[3], { size: SIZES.body, spacing: 5 });
                    });
                });

                processSection('skills-fields', 'Skills', (items) => {
                    doc.setFont(selectedFont, 'bold').setFontSize(SIZES.body);
                    let maxCategoryWidth = 0;
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        const category = inputs[0] ? `${inputs[0]}: ` : '';
                        const width = doc.getTextWidth(category);
                        if (width > maxCategoryWidth) maxCategoryWidth = width;
                    });
                    const skillsX = margin + maxCategoryWidth + 2;
                    const skillsWidth = pageWidth - skillsX - margin;
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        const category = inputs[0] ? `${inputs[0]}: ` : '';
                        const skills = inputs[1] || '';
                        doc.setFont(selectedFont, 'normal').setFontSize(SIZES.body);
                        const skillLines = doc.splitTextToSize(skills, skillsWidth);
                        const blockHeight = getLinesHeight(skillLines, SIZES.body);
                        checkPageBreak(blockHeight + 3);
                        doc.setFont(selectedFont, 'bold').setFontSize(SIZES.body).setTextColor(COLORS.title);
                        doc.text(category, margin, y);
                        doc.setFont(selectedFont, 'normal').setFontSize(SIZES.body).setTextColor(COLORS.text);
                        doc.text(skillLines, skillsX, y);
                        y += blockHeight + 3;
                    });
                });

                processSection('honors-fields', 'Honors and Awards', (items) => {
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        addParagraph(`â€¢ ${inputs[0]}`, { size: SIZES.body, spacing: 2, x: margin + 5, width: usableWidth - 5 });
                    });
                });

                processSection('languages-fields', 'Languages', (items) => {
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        y += 2;
                        const langText = `${inputs[0]}: `;
                        doc.setFont(selectedFont, 'bold').setFontSize(SIZES.body).setTextColor(COLORS.title);
                        doc.text(langText, margin, y);
                        doc.setFont(selectedFont, 'normal').setFontSize(SIZES.body).setTextColor(COLORS.text);
                        doc.text(inputs[1], margin + doc.getTextWidth(langText) + 2, y);
                        y += 5;
                    });
                });

                processSection('references-fields', 'References', (items) => {
                    items.forEach(item => {
                        const inputs = Array.from(item.querySelectorAll('input, textarea')).map(i => i.value);
                        addParagraph(inputs[0], { size: SIZES.h4, style: 'bold', color: COLORS.title, spacing: 1 });
                        addParagraph(inputs[1], { size: SIZES.body, color: COLORS.text, spacing: 1 });
                        addParagraph(inputs[2], { size: SIZES.small, style: 'italic', color: COLORS.subtitle, spacing: 4 });
                    });
                });

                doc.save(`${(name || 'resume').toLowerCase().replace(/ /g, '_')}.pdf`);
            } catch (error) {
                console.error("Failed to generate PDF:", error);
                alert("An error occurred while generating the PDF. Please check the console for details.");
            }
        });

        // --- INITIAL DATA SETUP ---
        // window.onload = () => {
        //      // Set Copyright Year
        //     document.getElementById('copyright-year').textContent = new Date().getFullYear();

        //     const educationData = [
        //         ["Polytechnic University of the Philippines - Sta. Mesa, Manila", "Diploma in Computer Engineering Technology", "2022-2025"],
        //         ["Asian Institute of Computer Studies - Montalban, Rizal", "Information and Communication Technology", "2020-2022"],
        //         ["Kasiglahan Village National High School", "Junior High School", "2016-2020"]
        //     ];
        //     educationData.forEach(data => setFieldValues(addField('education-fields', ['School Name', 'Degree/Course', 'Year']), data));

        //     const experienceData = [
        //         ["Senior Graphic Designer", "ICPEP Student Edition - PUP Manila", "December 2024 - Present", "Working with the design of visual materials for organizational events, publications, and online platforms. Develop creative concepts and execute designs for a variety of media."],
        //         ["UI/UX Cadet", "Google Developer Student Clubs - PUP", "November 2024 - Present", "Contributed to the design and development of user interfaces and user experiences for club projects. Collaborated with developers to create intuitive and visually appealing digital solutions."],
        //         ["Risk Management Information Security Group (RMISG) Intern", "Universal Storefront Services Corporation", "March 2025- May 2025", "Gained hands-on experience in cybersecurity fundamentals, including threat landscapes and security policy implementation. Deployed and secured an Ubuntu Server, configuring UFW firewall rules and implementing fail2ban for SSH protection."],
        //         ["Web Development Intern", "iBuild.PH Web Solutions & Services", "July 2024-September 2024", "Contributed to web design and development projects, focusing on creating user-friendly websites. Designed website layouts, implemented features, and optimized sites for search engines (SEO) to improve visibility."]
        //     ];
        //     experienceData.forEach(data => setFieldValues(addField('experience-fields', ['Job Title', 'Company', 'Duration', { placeholder: 'Description...', type: 'textarea' }]), data));

        //     const skillsData = [
        //         ["Programming", "HTML, CSS, JavaScript, Bootstrap, Tailwind, Java, Python, SQL"],
        //         ["Cybersecurity", "Vulnerability Assessment, Penetration Testing, Network Security, Firewall Configuration (UFW), Intrusion Detection (fail2ban), SIEM (Flare), Security Tools (Crowdstrike, Kaspersky, WP Scan, OpenVAS)"],
        //         ["Applications", "Adobe Photoshop, Adobe Illustrator, Figma, Visual Studio Code, Eclipse IDE, Canva, Capcut"],
        //         ["Platforms", "Windows, Linux, iOS"]
        //     ];
        //     skillsData.forEach(data => setFieldValues(addField('skills-fields', ['Category', 'Skills'], false), data));

        //     const honorsData = [
        //         ["TESDA National Certificate II in Computer Systems Servicing (CSS)"],
        //         ["President Lister | Polytechnic University of the Philippines (Multiple Semesters)"]
        //     ];
        //     honorsData.forEach(data => setFieldValues(addField('honors-fields', ['Honor or Award'], false), data));

        //     const languagesData = [
        //         ["Tagalog", "Native"],
        //         ["English", "Upper-Intermediate"]
        //     ];
        //     languagesData.forEach(data => setFieldValues(addField('languages-fields', ['Language', 'Proficiency'], false), data));

        //     const referencesData = [
        //         ["Mr. Jose Clarence Panganiban, CC | CISSP | CGRC", "Group Head of Risk Management and Security Group | Universal Storefront Services Corporation", "+639171235268"]
        //     ];
        //     referencesData.forEach(data => setFieldValues(addField('references-fields', ['Name', 'Title & Company', 'Contact']), data));

        //     generatePreview();
        // };
    </script>
</body>

</html>